Fixes Needed
✅ Fix 1: Correct the Syntax Error in route.ts (Missing } or ;)
✅ Fix 2: Properly Align Messages in the Chat UI (Sent on Right, Received on Left)

🛠 Fix 1: Syntax Error in route.ts
🔹 Your error suggests a missing closing } or semicolon (;) in your query.

🔧 Corrected Code:
ts
Copy
Edit
export async function GET(req: NextRequest, { params }: { params: { chatId?: string } }) {
  if (!params?.chatId) {
    console.error("❌ Missing chatId:", params);
    return NextResponse.json({ error: "Chat ID is required" }, { status: 400 });
  }

  const chatId = params.chatId;
  console.log("📩 Fetching messages for chat:", chatId);

  try {
    const { db } = await connectToDatabase();
    const chat = await db.collection("chats").findOne({
      _id: new ObjectId(chatId), // Ensure correct ID format
    });

    if (!chat) {
      return NextResponse.json({ error: "Chat not found" }, { status: 404 });
    }

    const messages = await db.collection("messages").find({ chatId }).toArray();
    return NextResponse.json({ messages });

  } catch (error) {
    console.error("❌ Error fetching messages:", error);
    return NextResponse.json({ error: "Internal Server Error" }, { status: 500 });
  }
}
✅ Ensures the object is correctly closed with }
✅ Uses new ObjectId(chatId) to avoid type mismatch errors

🛠 Fix 2: Message Alignment Like Telegram
🔹 Sent messages → Right Side
🔹 Received messages → Left Side

🔧 Update Your Chat Message Component (Message.tsx)
tsx
Copy
Edit
import React from 'react';
import { useAuth } from '@/hooks/use-auth'; // Assuming you have auth context

const Message = ({ message }: { message: any }) => {
  const { user } = useAuth(); // Get current user

  const isSentByCurrentUser = message.senderId === user?.id;

  return (
    <div className={`flex ${isSentByCurrentUser ? 'justify-end' : 'justify-start'}`}>
      <div
        className={`px-4 py-2 rounded-lg max-w-xs break-words ${
          isSentByCurrentUser ? 'bg-blue-500 text-white' : 'bg-gray-200 text-black'
        }`}
      >
        {message.text}
      </div>
    </div>
  );
};

export default Message;
🔧 Update Your Chat List (Chat.tsx)
tsx
Copy
Edit
<div className="flex flex-col space-y-2">
  {messages.map((msg) => (
    <Message key={msg._id} message={msg} />
  ))}
</div>
✅ Uses justify-end for sent messages (Right Side)
✅ Uses justify-start for received messages (Left Side)
✅ Adds proper styling for readability

🚀 Next Steps
1️⃣ Fix the syntax issue in route.ts
2️⃣ Apply the updated message styling in Message.tsx
3️⃣ Restart the server and test the UI
4️⃣ Check console logs for any additional errors