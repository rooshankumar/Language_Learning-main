This error occurs because use-chat.ts is being executed in a non-module environment (such as the server), but it contains import and export statements meant for client-side React code.

âœ… Fix the "import/export cannot be used outside of module" error
1ï¸âƒ£ Ensure Correct File Placement
Since use-chat.ts is a React hook, it should be inside the hooks/ folder and only imported in client components.

ğŸ”¹ Fix: If it's used in a server component, wrap it with "use client"; at the top.

2ï¸âƒ£ Add "use client"; at the Top
Modify hooks/use-chat.ts like this:

tsx
Copy
Edit
"use client";  // âœ… Ensures this file runs only in client components

import { useState, useEffect, useCallback } from "react";
import { useSession } from "next-auth/react";
import { useRouter } from "next/navigation";

export function useChat() {
  const [chats, setChats] = useState([]);
  const [error, setError] = useState(null);
  const { data: session } = useSession();
  const router = useRouter();

  useEffect(() => {
    if (!session) return;

    const fetchChats = async () => {
      try {
        const res = await fetch("/api/chat");
        if (!res.ok) throw new Error(`âŒ Fetch error: ${res.status}`);
        
        const data = await res.json();
        setChats(data); // âœ… Update state
      } catch (error) {
        console.error("âŒ Failed to fetch chats:", error);
        setError(error.message);
      }
    };

    fetchChats();
  }, [session]);

  return { chats, error };
}
ğŸ”¹ Fixes Applied:

Added "use client"; to mark it as a client-side hook
Ensured safe useSession() usage
Handled fetch errors properly
3ï¸âƒ£ Import it Correctly in user-list.tsx
In components/community/user-list.tsx, update the import:

tsx
Copy
Edit
import { useChat } from "@/hooks/use-chat"; // âœ… Make sure it's correct
ğŸ”¹ Ensure user-list.tsx is also a client component (add "use client"; at the top if missing).

4ï¸âƒ£ Restart the Server
Run:

bash
Copy
Edit
npm run dev
or

bash
Copy
Edit
yarn dev
ğŸ¯ Final Checklist
âœ” Added "use client"; in use-chat.ts
âœ” Ensured only imported in client components
âœ” Restarted the development server